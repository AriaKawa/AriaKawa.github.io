<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Blackjack — Aria & Friends Hub</title>
<style>
  :root{
    --felt:#0e4d37;            /* table background */
    --felt-dark:#0a3a2a;
    --line:#154f40;
    --card:#fff;
    --shadow:0 14px 30px rgba(0,0,0,.35);
    --accent:#ffd13b;          /* primary button */
    --accent-2:#161a24;        /* secondary button */
    --text:#e9f1ee;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    color:var(--text); background:#0b1020; display:grid; place-items:center;
  }
  .lobby-overlay{
    position:fixed; inset:0;
    display:flex; align-items:center; justify-content:center;
    background:rgba(6,10,24,.82);
    backdrop-filter:blur(16px);
    -webkit-backdrop-filter:blur(16px);
    z-index:10;
    transition:opacity .3s ease;
  }
  .lobby-overlay.is-hidden{
    opacity:0;
    pointer-events:none;
  }
  .lobby-card{
    width:min(92vw, 440px);
    background:rgba(10,18,32,.82);
    border:1px solid rgba(255,255,255,.12);
    border-radius:26px;
    padding:2.4rem clamp(1.4rem,4vw,2.6rem);
    box-shadow:0 28px 60px rgba(0,0,0,.45);
    display:grid;
    gap:1.6rem;
    text-align:center;
  }
  .lobby-card h2{margin:0; font-size:1.8rem; letter-spacing:.08em;}
  .lobby-subtitle{font-size:.95rem; opacity:.75; line-height:1.5;}
  .mode-grid{display:grid; gap:1.4rem;}
  .lobby-btn{
    display:inline-flex; align-items:center; justify-content:center;
    gap:.4rem;
    padding:.85rem 1.45rem;
    border-radius:999px;
    font-weight:700; letter-spacing:.05em;
    border:1px solid transparent;
    cursor:pointer;
    transition:transform .2s ease, box-shadow .2s ease, background .2s ease;
    color:#0b1020;
  }
  .lobby-btn.primary{
    background:linear-gradient(135deg,#ffd13b,#ffef9a);
    box-shadow:0 16px 38px rgba(255,209,59,.25);
  }
  .lobby-btn.ghost{
    background:rgba(255,255,255,.08);
    color:#f0f6ff;
    border:1px solid rgba(255,255,255,.18);
    box-shadow:0 12px 28px rgba(0,0,0,.35);
  }
  .lobby-btn.small{padding:.65rem 1.1rem; font-size:.9rem;}
  .lobby-btn:disabled{opacity:.5; cursor:not-allowed;}
  .lobby-btn:not(:disabled):hover,
  .lobby-btn:not(:disabled):focus-visible{transform:translateY(-2px);}
  .multiplayer-card{
    background:rgba(0,0,0,.22);
    border-radius:22px;
    padding:1.6rem;
    display:grid;
    gap:1rem;
    text-align:left;
  }
  .multiplayer-card h3{margin:0; letter-spacing:.1em; font-size:1rem; text-transform:uppercase; opacity:.8;}
  .multiplayer-card p{margin:0; font-size:.92rem; opacity:.75; line-height:1.6;}
  .multiplayer-actions{display:flex; flex-wrap:wrap; gap:.6rem;}
  .host-panel,.join-form{
    background:rgba(7,12,22,.6);
    border:1px solid rgba(255,255,255,.12);
    border-radius:18px;
    padding:1rem 1.1rem;
    display:grid;
    gap:.75rem;
  }
  .code-label{font-size:.8rem; letter-spacing:.16em; text-transform:uppercase; opacity:.6;}
  .code-chip{
    font-size:1.6rem; font-weight:700; letter-spacing:.34em;
    background:rgba(255,209,59,.16);
    color:#ffd13b;
    text-align:center;
    padding:.55rem 1rem;
    border-radius:16px;
    border:1px solid rgba(255,209,59,.38);
  }
  .join-form label{font-size:.78rem; letter-spacing:.14em; text-transform:uppercase; opacity:.65;}
  .join-input-row{display:flex; gap:.6rem; align-items:center;}
  .join-input-row input{
    flex:1;
    background:rgba(255,255,255,.12);
    border:1px solid rgba(255,255,255,.22);
    border-radius:14px;
    padding:.55rem .9rem;
    font-size:1rem;
    letter-spacing:.24em;
    text-transform:uppercase;
    color:#f4f7fb;
  }
  .join-input-row input::placeholder{
    color:rgba(244,247,251,.55);
    letter-spacing:0;
    text-transform:none;
  }
  .lobby-status{
    min-height:1.2rem;
    font-size:.95rem;
    color:#ffd13b;
  }
  .hidden{display:none !important;}
  .table{
    position:relative; width:min(1100px, 96vw); aspect-ratio: 16/9;
    background: radial-gradient(120% 90% at 50% -15%, #208b6e 0, var(--felt) 32%, var(--felt-dark) 95%);
    border-radius:28px; box-shadow: var(--shadow);
    overflow:hidden; border:6px solid #0c3024;
  }
  .table::after{
    content:""; position:absolute; inset:20px;
    border:2px dashed rgba(255,255,255,.15); border-radius:22px; pointer-events:none;
  }
  header{
    position:absolute; top:14px; left:18px; right:18px; display:flex; align-items:center; gap:.75rem;
    z-index:3;
  }
  .brand{font-weight:800; letter-spacing:.08em; opacity:.9}
  .spacer{flex:1}
  .chip{
    font-variant-numeric:tabular-nums;
    background:linear-gradient(#ffe07a, #e3b312);
    color:#2a2100; font-weight:800; padding:.45rem .7rem; border-radius:999px; box-shadow: var(--shadow);
  }

  /* Lanes */
  .lane{ position:absolute; left:50%; transform:translateX(-50%); width:80%; }
  .dealer.lane{ top:10%; }
  .player.lane{ bottom:12%; }

  /* Card */
  .card{
    width:96px; height:136px; border-radius:12px; background:var(--card);
    box-shadow: var(--shadow); position:absolute; transition: transform .4s ease, top .4s ease, left .4s ease, opacity .3s ease;
    display:grid; place-items:center; overflow:hidden;
  }
  @media (max-width:720px){
    .card{ width:78px; height:112px; border-radius:10px; }
  }
  .card .svg{ width:94%; height:94%; }
  .back{
    background:repeating-linear-gradient(45deg, #1d2740, #1d2740 10px, #2b3a66 10px, #2b3a66 20px);
    border:3px solid #e5e9f6; position:absolute; inset:0; border-radius:12px;
  }

  /* Spots where cards settle */
  .spot{ position:relative; height:150px; }
  @media (max-width:720px){ .spot{ height:120px; } }

  /* Labels */
  .label{
    position:absolute; left:50%; transform:translateX(-50%);
    text-align:center; text-shadow:0 2px 8px rgba(0,0,0,.5);
  }
  .label.dealer{ top:4%; font-weight:700; opacity:.9 }
  .label.player{ bottom:6%; font-weight:700; opacity:.95 }
  .total{ font-size:1.05rem; opacity:.9 }

  /* Controls */
  .controls{
    position:absolute; left:50%; transform:translateX(-50%);
    bottom:3%; display:flex; gap:.6rem; z-index:3; flex-wrap:wrap; justify-content:center;
  }
  button{
    appearance:none; border:0; border-radius:14px; padding:.9rem 1.2rem;
    font-weight:800; box-shadow: var(--shadow); cursor:pointer; transition: transform .05s ease, filter .2s ease, opacity .2s ease;
  }
  button:active{ transform:translateY(1px) scale(.99) }
  .primary{ background:var(--accent); color:#1a1400 }
  .ghost{ background:var(--accent-2); color:#e9ecf5; border:1px solid rgba(255,255,255,.1) }
  .muted{ opacity:.6; pointer-events:none }

  /* Toast / status */
  .status{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:1.6rem; font-weight:800; letter-spacing:.02em; text-align:center;
    text-shadow:0 3px 30px rgba(0,0,0,.55); opacity:0; transition:opacity .2s ease;
    pointer-events:none; max-width:80%;
  }
  .status.show{ opacity:1 }

  /* Exit link */
  .back-link{
    position:absolute; top:16px; right:20px; z-index:4; display:inline-flex; align-items:center;
    gap:.4rem; font-size:.95rem; text-decoration:none; font-weight:600; color:var(--text);
    background:rgba(0,0,0,.35); padding:.45rem .8rem; border-radius:999px; transition:background .2s ease, transform .2s ease;
  }
  .back-link:hover{ background:rgba(0,0,0,.55); transform:translateY(-1px); }
</style>
</head>
<body>
  <div class="lobby-overlay" id="lobbyOverlay" role="dialog" aria-modal="true">
    <div class="lobby-card">
      <div>
        <h2>Blackjack Lobby</h2>
        <p class="lobby-subtitle">Jump into a solo session or invite a friend with a shareable code.</p>
      </div>
      <div class="mode-grid">
        <button class="lobby-btn primary" id="singleplayerBtn">Singleplayer</button>
        <div class="multiplayer-card">
          <div>
            <h3>Multiplayer</h3>
            <p>Host a room to generate a code or join a friend's table.</p>
          </div>
          <div class="multiplayer-actions">
            <button class="lobby-btn ghost" id="hostBtn">Host</button>
            <button class="lobby-btn ghost" id="joinToggle" aria-expanded="false">Join</button>
          </div>
          <div class="host-panel hidden" id="hostPanel">
            <div class="code-label">Share this code</div>
            <div class="code-chip" id="hostCode">-----</div>
          </div>
          <form class="join-form hidden" id="joinForm">
            <label for="joinCodeInput">Enter lobby code</label>
            <div class="join-input-row">
              <input id="joinCodeInput" maxlength="6" autocomplete="off" placeholder="ABC123" />
              <button class="lobby-btn primary small" type="submit" id="joinSubmit">Join</button>
            </div>
          </form>
        </div>
      </div>
      <div class="lobby-status" id="lobbyStatus"></div>
    </div>
  </div>
  <a class="back-link" href="index.html">← Back to the friend hub</a>
  <div class="table" id="table">
    <header>
      <div class="brand">BLACKJACK • FRIENDS LOUNGE</div>
      <div class="spacer"></div>
      <div class="chip">Bank: <span id="bank">1000</span></div>
    </header>

    <div class="label dealer">Dealer • <span class="total" id="dealerTotal">0</span></div>
    <div class="lane dealer">
      <div class="spot" id="dealerSpot"></div>
    </div>

    <div class="label player">You • <span class="total" id="playerTotal">0</span></div>
    <div class="lane player">
      <div class="spot" id="playerSpot"></div>
    </div>

    <div class="status" id="status"></div>

    <div class="controls" id="controls">
      <button class="primary" id="btnDeal">Deal</button>
      <button class="primary muted" id="btnHit">Hit</button>
      <button class="ghost muted" id="btnStand">Stand</button>
      <button class="ghost" id="btnNew">New Shoe</button>
    </div>
  </div>

<script type="module" src="js/blackjack.js"></script>
</body>
</html>
